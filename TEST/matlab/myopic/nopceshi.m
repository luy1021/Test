a1=2.16;a2=2.17;a3=2.17;a4=2.14;
b1=0.19;b2=0.33;b3=0.28;b4=0.62;


x1=0;x2=0;x3=0;
x4=0;
theta=0.99;

pp1=[];pp2=[];pp3=[];
pp4=[];
q1=[];q2=[];q3=[];
q4=[];
pi=[];
t=1;
while t<=12
f=@(x)(-(...
    (1/b1)*x(1)*(a1-log(x(1))+log(1-x(1)-x(2)-x(3)-x(4)))+...
    (1/b2)*x(2)*(a2-log(x(2))+log(1-x(1)-x(2)-x(3)-x(4)))+...
    (1/b3)*x(3)*(a3-log(x(3))+log(1-x(1)-x(2)-x(3)-x(4)))+...
    (1/b4)*x(4)*(a4-log(x(4))+log(1-x(1)-x(2)-x(3)-x(4)))...
    ));
x0=[0.01;0.01;0.01;0.01];
lb=[0;0;0;0];
ub=[1;1;1;1];
[xx1,fval1] = fmincon(f,x0,[],[],[],[],lb,ub);
p1=(1/b1)*(a1-log(xx1(1))+log(1-xx1(1)-xx1(2)-xx1(3)-xx1(4)))
p2=(1/b2)*(a2-log(xx1(2))+log(1-xx1(1)-xx1(2)-xx1(3)-xx1(4)))
p3=(1/b3)*(a3-log(xx1(3))+log(1-xx1(1)-xx1(2)-xx1(3)-xx1(4)))
p4=(1/b4)*(a4-log(xx1(4))+log(1-xx1(1)-xx1(2)-xx1(3)-xx1(4)))
x1 = xx1(1) 
x2 = xx1(2) 
x3 = xx1(3)
x4 = xx1(4)
%pi1=p1*xx1(1)+p2*xx1(2)+p3*xx1(3)
pi1 = -fval1 
pp1=[pp1 p1]
pp2=[pp2 p2]
pp3=[pp3 p3]
pp4=[pp4 p4]
q1=[q1 xx1(1)]
q2=[q2 xx1(2)]
q3=[q3 xx1(3)]
q4=[q4 xx1(4)]
pi=[pi pi1]
t=t+1
end
